<style>
body{
  background-color: #f5f5f5;
  font-size: 30px;
}

h2{color: #563d7c;
  font-family: Helvetica, sans-serif;
  font-size: 60px;
  text-align: center;
}

.centre{margin-left: auto;
  margin-right: auto;
}

#logged_in_as{
  font-size: 1.5rem;
  color: white;
  }
#create_web_button{
  border-radius: 10px;
  border-style: solid;
  padding: 15px;
  background: white;
  color: black;
  text-transform: none;
  padding-top: 20px;
  font-size: 1.5rem;
}

#create_web_button:hover{
  background: #212529;
  color: white;
  }

#top_bar{
  font-size:1.5rem;
  color:black;
  width:100%;
  height:60px;
  background-color:#343a40;
}

.top-nav-left{
  float: left;
color: #f8f9fa;
font-size: 1.5rem;
height:60px;
margin-top:15px;
padding-left:10px;
}

.top-nav-right{
  float: right;
color: #c1c1c1;
height:60px;
margin-top:20px;
font-size: 1rem;
padding-left:10px;
padding-right:10px;
}

.top-nav-right a{
  text-decoration:none;
  color:white;
}

.top-nav-right a:visited{
  text-decoration:none;
  color:white;
}

.top-nav-right a:active{
  text-decoration:none;
  color:white;
}

.table-css{
  background-color:#e9ecef;
  border-color:#212529;
  border-style:solid;
  width:90%;
  font-size:1.5rem;
  -webkit-box-shadow: 20px 20px 28px -17px rgba(0,0,0,0.32);
  -moz-box-shadow: 20px 20px 28px -17px rgba(0,0,0,0.32);
  box-shadow: 20px 20px 28px -17px rgba(0,0,0,0.32);
}
tr:nth-child(even) {
          background-color: #f5f5f5;}

@keyframes fuck_taste_wp{
  0%{
    color: red;
  }
  33%{
    color: green;
  }
  66%{
    color: blue;
  }
  100%{
    color: orange;
  }
}

#fuck_twp{
  animation: fuck_taste_wp 2s ease forwards infinite;
  font-size: 1rem;
  }
</style>

<!-- Top Nav Bar -->
<div id="top_bar">
  <div class="top-nav-left"> <strong> BlogVault </strong></div>
  <% if current_user %>
    <div class="top-nav-right"> <%= link_to "Home", root_path %> | <b><%= current_user.email %> </b> | <%= link_to "Log Out", destroy_user_session_path, method: :delete %></div>
  <% else %>
    <div class="top-nav-right"> <%= link_to "Home", root_path %> | <%= link_to "Sign Up", new_user_registration_path %> | <%= link_to "Log In", new_user_session_path %></div>
  <%end%>
</div>

<center>
  <h2> Get Wordpress sites with just a click!</h2>

  <% if params[:error] == 'site_not_created' %>
    <h3 style="font-size:1.5rem;"> Error while creating site. Try again later </h3>
  <% end %>
<% if current_user %>
<h2 style="font-size: 30px;">Your Sites List </h2>
<div>
  <table class="table-css" >
    <tr style="background-color:#212529;color:#f5f5f5;">
      <th> Name </th>
      <th> Created at </th>
      <th> PHP version </th>
      <th> wordpress version </th>
      <th> url </th>
      <th> action </th>
    </tr>
  <% present = false %>
  <% @sites.each do |site| %>
    <% if site.status == "running" and site.account_id == current_user.id %>
      <% present = true %>
      <tr>
        <td> <%= link_to site.name, site %> </td>
        <td> <%= site.created_at %> </td>
        <td><%= site.php_version %></td>
        <td><%= site.wp_version %></td>
        <td> <a href = "<%= 'http://206.189.138.203/' + site.name %>" target="_blank" >http://206.189.138.203/<%= site.name %></a>  </td>
        <td><%= link_to "Delete", site_path(site),
                        method: :delete,
                        data: { confirm: "Are you sure?" } %>
                        </td>
      </tr>
    <% end %>
  <% end %>
  <% if !present%>
  <tr>
    <td>-</td>
    <td>-</td>
    <td>-</td>
    <td>-</td>
    <td>-</td>
    <td>-</td>
  </tr>
  <% end %>
  </table>
</div>
<% end %>

<% if notice == "Successfully Deleted!" %>
  <h3 style="font-size:1.5rem"> <%= notice %> </h3>
<% end %>

<% if notice == "Error while deleting site. Try again later." %>
  <h3 style="font-size:1.5rem"> <%= notice %> </h3>
<% end %>

<%= form_with model: @site do |form| %>
  <div>
    <%= form.label :wp_version, "Wordpress Version" %>
    <%= form.select :wp_version, ['latest', '5.6.8'] %>
  </div>

  <div>
    <%= form.label :php_version, "PHP Version" %>
    <%= form.select :php_version, ['7.4', '8.1'] %>
  </div>
  <br>
  <div>
    <%= form.submit id: 'create_web_button'%>
  </div>
  <% if !current_user %>
    <br>
    <div>
      <% if notice %>
        <p> <%= notice %> </p>
      <% end %>
      <%= recaptcha_tags %>
    </div>
  <%end%>
<% end %>



<% if params[:error] == "limit_reached" %>
  <br><br><br><br><br><br><br>
  <h3 style="font-size:1.5rem"> You Can't create more than two sites without signing in. <%= link_to "sign up", new_user_registration_path %> </h3>
<% end %>
</center>
<br><br>
<marquee id="fuck_twp" direction="right" scrollamount="10">
Better than Tastewp.com :)
</marquee>
